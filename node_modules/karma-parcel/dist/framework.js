"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function createParcelFramework(logger, conf, parcelPlugin) {
    const log = logger.create("framework:parcel");
    const { bundleFile } = parcelPlugin.workspace();
    log.debug(`Adding ${bundleFile} to the fileList`);
    conf.files = conf.files || [];
    conf.files.push({
        pattern: bundleFile,
        // karma should not serve the file. Parcel's middleware will
        // do the bundling/serving of the file
        served: false,
        included: true,
        watched: parcelPlugin.isWatching()
    });
    log.debug(`Adding middleware:parcel`);
    conf.middleware = conf.middleware || [];
    if (typeof conf.middleware === "string") {
        conf.middleware = [conf.middleware];
    }
    conf.middleware.push("parcel");
}
exports.createParcelFramework = createParcelFramework;
createParcelFramework.$inject = ["logger", "config", "parcelPlugin"];
